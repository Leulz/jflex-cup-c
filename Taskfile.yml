# github.com/go-task/task

make:
  cmds:
    - jflex lexical.jflex
    - java -cp ".;lib/java-cup-11a.jar" java_cup.Main -interface -expect 2 grammar.cup
    - javac -cp src/ -d bin/ src/exception/*.java src/model/*.java
    - javac -cp ".;bin;lib/java-cup-11a.jar" Main.java

clean:
  cmds:
    - rm parser.* sym.* Lexer.* *.class *.log

test:
  cmds:
    - touch error.log
    - truncate -s 0 error.log
    - java -cp ".;bin;lib/java-cup-11a-runtime.jar" Main tests/test_error.c 2>&1 | sed "s,^,Error in tests/test_error.c = ," > error1.log
    - java -cp ".;bin;lib/java-cup-11a-runtime.jar" Main tests/test_error2.c 2>&1 | sed "s,^,Error in tests/test_error2.c = ," > error2.log
    - java -cp ".;bin;lib/java-cup-11a-runtime.jar" Main tests/test_success.c 2>&1 | sed "s,^,Error in tests/test_success.c = ," > error3.log
    - cat error1.log error2.log error3.log > error.log
    - rm error1.log error2.log error3.log

debug:
  cmds:
    - java -cp ".;bin;lib/java-cup-11a-runtime.jar" Main tests/test_success.c "debug"